<!--settings.wxml-->
<view class="container">
  <!-- 用户信息区域 -->
  <view class="user-section card">
    <view class="user-info">
      <view class="user-avatar">
        <text class="avatar-icon">👤</text>
      </view>
      <view class="user-details">
        <view class="user-name">用户</view>
        <view class="user-desc">肝胆胰外科病例系统</view>
      </view>
    </view>
  </view>

  <!-- 数据统计 -->
  <view class="stats-section card">
    <view class="section-title">数据统计</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-number">{{totalCases}}</view>
        <view class="stat-label">总病例数</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{completedCases}}</view>
        <view class="stat-label">已完成</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{draftCases}}</view>
        <view class="stat-label">草稿</view>
      </view>
    </view>
  </view>

  <!-- 设置选项 -->
  <view class="settings-section">
    <!-- 数据管理 -->
    <view class="setting-group card">
      <view class="section-title">数据管理</view>
      
      <view class="setting-item" bindtap="exportData">
        <view class="setting-content">
          <view class="setting-icon">📤</view>
          <view class="setting-info">
            <view class="setting-title">导出数据</view>
            <view class="setting-desc">导出所有病例数据</view>
          </view>
        </view>
        <view class="setting-arrow">→</view>
      </view>

      <view class="setting-item" bindtap="clearCache">
        <view class="setting-content">
          <view class="setting-icon">🗑️</view>
          <view class="setting-info">
            <view class="setting-title">清除缓存</view>
            <view class="setting-desc">清除临时文件和缓存</view>
          </view>
        </view>
        <view class="setting-arrow">→</view>
      </view>

      <view class="setting-item" bindtap="clearAllData">
        <view class="setting-content">
          <view class="setting-icon">⚠️</view>
          <view class="setting-info">
            <view class="setting-title">清空所有数据</view>
            <view class="setting-desc">删除所有病例和草稿</view>
          </view>
        </view>
        <view class="setting-arrow">→</view>
      </view>
    </view>

    <!-- 应用设置 -->
    <view class="setting-group card">
      <view class="section-title">应用设置</view>
      
      <view class="setting-item">
        <view class="setting-content">
          <view class="setting-icon">💾</view>
          <view class="setting-info">
            <view class="setting-title">自动保存草稿</view>
            <view class="setting-desc">填写时自动保存</view>
          </view>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.autoSave}}" 
               bindchange="onAutoSaveChange" />
      </view>

      <view class="setting-item">
        <view class="setting-content">
          <view class="setting-icon">🔔</view>
          <view class="setting-info">
            <view class="setting-title">消息通知</view>
            <view class="setting-desc">接收系统通知</view>
          </view>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.notification}}" 
               bindchange="onNotificationChange" />
      </view>

      <view class="setting-item" bindtap="selectFontSize">
        <view class="setting-content">
          <view class="setting-icon">🔤</view>
          <view class="setting-info">
            <view class="setting-title">字体大小</view>
            <view class="setting-desc">{{fontSizeText}}</view>
          </view>
        </view>
        <view class="setting-arrow">→</view>
      </view>
    </view>

    <!-- 关于应用 -->
    <view class="setting-group card">
      <view class="section-title">关于应用</view>
      
      <view class="setting-item" bindtap="checkVersion">
        <view class="setting-content">
          <view class="setting-icon">ℹ️</view>
          <view class="setting-info">
            <view class="setting-title">版本信息</view>
            <view class="setting-desc">v1.0.0</view>
          </view>
        </view>
        <view class="setting-arrow">→</view>
      </view>

      <view class="setting-item" bindtap="showHelp">
        <view class="setting-content">
          <view class="setting-icon">❓</view>
          <view class="setting-info">
            <view class="setting-title">使用帮助</view>
            <view class="setting-desc">查看使用说明</view>
          </view>
        </view>
        <view class="setting-arrow">→</view>
      </view>

      <view class="setting-item" bindtap="contactUs">
        <view class="setting-content">
          <view class="setting-icon">📞</view>
          <view class="setting-info">
            <view class="setting-title">联系我们</view>
            <view class="setting-desc">反馈问题和建议</view>
          </view>
        </view>
        <view class="setting-arrow">→</view>
      </view>
    </view>
  </view>
</view>

<!-- 字体大小选择弹窗 -->
<view class="modal-overlay" wx:if="{{showFontModal}}" bindtap="closeFontModal">
  <view class="modal-content" catchtap="stopPropagation">
    <view class="modal-header">
      <view class="modal-title">选择字体大小</view>
    </view>
    <view class="modal-body">
      <view class="font-options">
        <view class="font-option {{settings.fontSize === 'small' ? 'active' : ''}}" 
              bindtap="selectFontSizeOption" data-size="small">
          <view class="font-text small">标准 - 适合年轻用户</view>
          <view class="font-check">{{settings.fontSize === 'small' ? '✓' : ''}}</view>
        </view>
        <view class="font-option {{settings.fontSize === 'normal' ? 'active' : ''}}" 
              bindtap="selectFontSizeOption" data-size="normal">
          <view class="font-text normal">大字 - 推荐老年用户</view>
          <view class="font-check">{{settings.fontSize === 'normal' ? '✓' : ''}}</view>
        </view>
        <view class="font-option {{settings.fontSize === 'large' ? 'active' : ''}}" 
              bindtap="selectFontSizeOption" data-size="large">
          <view class="font-text large">超大 - 视力不佳用户</view>
          <view class="font-check">{{settings.fontSize === 'large' ? '✓' : ''}}</view>
        </view>
      </view>
    </view>
    <view class="modal-footer">
      <button class="btn btn-secondary" bindtap="closeFontModal">取消</button>
      <button class="btn btn-primary" bindtap="confirmFontSize">确定</button>
    </view>
  </view>
</view>
