<!--index.wxml-->
<view class="container">
  <!-- 顶部欢迎区域 -->
  <view class="hero-section">
    <view class="hero-content">
      <view class="app-icon">
        <text class="icon">🏥</text>
      </view>
      <view class="title">肝胆胰外科病例</view>
      <view class="subtitle">专业的病例记录与管理系统</view>
      <view class="description">帮助您快速、准确地记录和管理病例信息</view>
    </view>
  </view>

  <!-- 功能卡片区域 -->
  <view class="feature-section">
    <!-- 新建病例卡片 -->
    <view class="card feature-card" bindtap="navigateToNewCase">
      <view class="card-body">
        <view class="feature-icon primary">
          <text class="icon">📝</text>
        </view>
        <view class="feature-content">
          <view class="feature-title">新建病例</view>
          <view class="feature-desc">开始录入新的病例信息</view>
        </view>
        <view class="feature-arrow">
          <text class="arrow">→</text>
        </view>
      </view>
    </view>

    <!-- 病例列表卡片 -->
    <view class="card feature-card" bindtap="navigateToCaseList">
      <view class="card-body">
        <view class="feature-icon success">
          <text class="icon">📋</text>
        </view>
        <view class="feature-content">
          <view class="feature-title">病例列表</view>
          <view class="feature-desc">查看和管理已录入的病例</view>
          <view class="feature-badge" wx:if="{{caseCount > 0}}">
            <text class="badge badge-primary">{{caseCount}}</text>
          </view>
        </view>
        <view class="feature-arrow">
          <text class="arrow">→</text>
        </view>
      </view>
    </view>

    <!-- 草稿箱卡片 -->
    <view class="card feature-card" bindtap="navigateToDraft" wx:if="{{hasDraft}}">
      <view class="card-body">
        <view class="feature-icon warning">
          <text class="icon">📄</text>
        </view>
        <view class="feature-content">
          <view class="feature-title">继续填写</view>
          <view class="feature-desc">继续完成未完成的病例</view>
          <view class="feature-meta">
            <text class="text-secondary">上次编辑：{{draftUpdateTime}}</text>
          </view>
        </view>
        <view class="feature-arrow">
          <text class="arrow">→</text>
        </view>
      </view>
    </view>

    <!-- 设置页面卡片 -->
    <view class="card feature-card" bindtap="navigateToSettings">
      <view class="card-body">
        <view class="feature-icon secondary">
          <text class="icon">⚙️</text>
        </view>
        <view class="feature-content">
          <view class="feature-title">应用设置</view>
          <view class="feature-desc">管理数据和应用偏好</view>
        </view>
        <view class="feature-arrow">
          <text class="arrow">→</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 快速统计 -->
  <view class="stats-section" wx:if="{{caseCount > 0}}">
    <view class="section-title">数据概览</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-number">{{caseCount}}</view>
        <view class="stat-label">总病例数</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{todayCount}}</view>
        <view class="stat-label">今日新增</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{recentCount}}</view>
        <view class="stat-label">近7天</view>
      </view>
    </view>
  </view>

  <!-- 使用提示 -->
  <view class="tips-section" wx:if="{{caseCount === 0}}">
    <view class="section-title">使用指南</view>
    <view class="tips-list">
      <view class="tip-item">
        <view class="tip-number">1</view>
        <view class="tip-content">
          <view class="tip-title">开始录入</view>
          <view class="tip-desc">点击"新建病例"开始录入患者信息</view>
        </view>
      </view>
      <view class="tip-item">
        <view class="tip-number">2</view>
        <view class="tip-content">
          <view class="tip-title">分步填写</view>
          <view class="tip-desc">按照步骤逐一填写各项信息，支持保存草稿</view>
        </view>
      </view>
      <view class="tip-item">
        <view class="tip-number">3</view>
        <view class="tip-content">
          <view class="tip-title">管理病例</view>
          <view class="tip-desc">在病例列表中查看、编辑和管理所有病例</view>
        </view>
      </view>
    </view>
  </view>
</view>
