# 医疗助手微信小程序

## 项目简介

这是一个面向医院病人的微信小程序，主要功能包括：

1. **病例导入功能** - 病人可以上传自己的检查报告、病例信息等
2. **病例管理功能** - 查看、管理已导入的病例信息

## 主要功能

### 1. 首页
- 病例导入：分页式表单，逐步输入病例信息
- AI病情分析：功能开发中（敬请期待）
- 我的病例：查看和管理已导入的病例

### 2. 个人中心
- 微信登录：通过微信授权获取用户信息（**注意：不获取手机号，用户需手动完善个人信息**）
- 个人资料：独立的个人资料编辑页面
- 病例管理：查看、删除病例

### 3. 病例导入
- **重要变更**：基本信息（姓名、性别、年龄）现在直接从用户个人信息中获取，无需重复输入
- 分页式表单设计，共5个步骤：
  1. 症状信息（症状出现时间）
  2. 合并疾病（多选，支持点击文字区域选择）
  3. 既往病史（多选，支持点击文字区域选择）
  4. 影像学报告（B超详细报告和结论）
  5. 病理报告（病理诊断和免疫组化）
- **用户体验优化**：导入完成后直接返回首页，避免多次点击返回

### 4. 病例管理
- 病例列表：查看所有已导入的病例
- 病例详情：查看完整的病例信息
- 病例删除：删除不需要的病例

## 使用流程

### 首次使用
1. **微信登录**：在个人中心点击"微信登录"进行授权
2. **完善个人信息**：点击"个人资料"进入编辑页面，填写姓名、性别、年龄等必要信息
3. **导入病例**：从首页进入病例导入，系统会自动使用您的个人信息
4. **管理病例**：在"我的病例"中查看和管理已导入的病例

### 病例导入流程
1. 确保已在个人中心完善个人信息
2. 点击"病例导入"开始录入
3. 按步骤填写症状信息、疾病史、检查报告等
4. 提交后自动跳转到病例列表，返回时直接回到首页

## 技术特点

- **现代化UI设计**：采用白色简约风格，圆角矩形按钮
- **分页式表单**：提升用户体验，避免一次性填写过多信息
- **个人信息集成**：病例基本信息自动从用户资料获取，避免重复输入
- **兼容性登录**：使用`wx.getUserProfile`获取用户信息，避免`wx.getPhoneNumber`兼容性问题
- **交互优化**：复选框支持点击文字区域选择，提升操作便利性
- **导航优化**：导入完成后直接返回首页，减少用户操作步骤
- **本地存储**：使用微信小程序的本地存储功能
- **响应式设计**：适配不同屏幕尺寸

## 项目结构

```
cases-import-miniapp/
├── app.js                 # 小程序入口文件
├── app.json              # 小程序配置文件
├── app.wxss              # 全局样式文件
├── pages/                # 页面文件夹
│   ├── index/           # 首页
│   ├── profile/         # 个人中心
│   ├── profile-edit/    # 个人资料编辑
│   ├── case-import/     # 病例导入
│   ├── case-list/       # 病例列表
│   └── case-detail/     # 病例详情
├── utils/               # 工具函数
└── other/               # 参考文件
    └── medical-form/    # 参考表单设计
```

## 开发说明

### 当前状态
- ✅ 前端界面开发完成
- ✅ 基础功能实现
- ✅ 本地数据存储
- ✅ 个人信息集成（病例基本信息自动获取）
- ✅ 兼容性登录（修复了wx.getPhoneNumber问题）
- ✅ 界面优化（个人资料独立页面、首页布局优化）
- ✅ 交互优化（复选框点击区域、导航流程优化）
- ⏳ AI功能开发中（敬请期待）
- ⏳ 后端接口对接（待开发）

### 重要变更
- **病例导入流程优化**：移除了基本信息输入步骤，直接从用户个人信息中获取
- **用户体验提升**：减少了重复输入，提高了操作效率
- **数据一致性**：确保病例信息与用户个人信息保持一致
- **登录方式优化**：移除了可能导致兼容性问题的`wx.getPhoneNumber`调用
- **界面重构**：个人资料编辑独立成页面，首页布局简化
- **交互改进**：复选框支持点击文字区域，导航流程优化

### 接口预留
项目中已预留了以下接口位置：
- 用户登录接口
- 病例数据上传接口
- 用户信息同步接口

### 后续开发计划
1. 接入真实的后端服务
2. 开发AI病情分析功能
3. 添加数据加密和安全措施
4. 优化用户体验和界面设计
5. 添加更多医疗相关功能

## 使用说明

1. 在微信开发者工具中导入项目
2. 配置小程序AppID
3. 编译运行即可预览效果

## 注意事项

- **重要**：使用前请先在个人中心完成微信登录并完善个人信息（姓名、性别、年龄）
- **登录说明**：由于微信政策变更，不再自动获取手机号，用户需要手动完善个人信息
- **操作提示**：在病例导入时，可以点击疾病名称或病史名称来选择，无需只点击复选框
- 当前版本使用本地存储，数据仅保存在设备本地
- 建议在真机上测试以获得最佳体验

## 故障排除

### 常见问题
1. **登录失败**：确保在微信开发者工具中正确配置了AppID
2. **个人信息不保存**：检查是否有足够的本地存储空间
3. **病例导入失败**：确保已完善个人信息（姓名、性别、年龄）

### 兼容性说明
- 支持微信版本 7.0.0 及以上
- 在开发者工具和真机环境下均可正常运行
- 已修复`wx.getPhoneNumber`兼容性问题 